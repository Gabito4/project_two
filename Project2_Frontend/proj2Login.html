<!DOCTYPE html>
<html lang="en">

<head>
    <title>Login Page</title>
    
            <style>  
            body{
                color:rgb(55, 8, 187);
            }
            table{
                margin: 5px;
                padding: 5px;
                width: 5px;
                
            }

            .starscell{
                border: 1px dashed blue;
                width: 1px;
                text-align: 50%;
                border-collapse: collapse;
            }
        </style>
    <style>
        .header {
            text-align: right
        }

        #myTable th,
        #myTable td {
            border: 1px solid black;
            width: 33%;
        }
    </style>
</head>

<body style="background-color:rgb(160, 158, 158);">


    <body><p style="text-align:left;">2022 Project 2 </p>
     <h1>
        <p style="text-align:center;">Revature Bank</p>
     </h1>
      <table  style="text-align:right;", align="right" >
        <tr>
            <td class="header"><label for="usernameInput">Username:</label></td>
            <td><input type="text" id="usernameInput" /></td>
        </tr>
        <tr>
            <td class="header"><label for="passwordInput">Password:</label></td>
            <td><input type="password" id="passwordInput" /></td>
        </tr>
        <tr>
            <td></td>
            <td><button onclick="userLogin()">Login</button>
                <button onclick="userLogin()"><a href="C:\Users\Gabriel Charles\Desktop\Revature\Training\Classwork\VisualStudioCode\HTMLCSS\proj2Register.html" target="_blank">Register</a></button></td>
        </tr>
    </table>
     <p style="text-align:center;">Welcome to our bank</p>
     <ar></ar>
     <div>
         <h2><p style="text-align:left;">Our Investors</p></h2>
         <img src="C:\Users\Gabriel Charles\Desktop\Revature\Training\SileniumExample\investors.jpg" height="250" width=" 450" style="margin-left: 10px;"/>
        <br>
        <a href = "https://www.youtube.com/" style="margin-right: 10px;" target="_blank">Click here to learn more</a>
    </div>
    <p style="text-align:right;">About Us.............................................................................................<br>
     <br>We are a very reputable Bank.............................................................. <br>
     you can contact us at 555-555-5555....................................................
     </p>
    <table id="bankTable" style="border: 10px solid black;">
        <tr>
            <th>Build</th>
            <th>Since</th>
            <th>November</th>
            <th>1960</th>
        </tr>
        <tr>
            <th>by</th>
            <th>the</th>
            <th>American</th>
            <th>group</th>
        </tr>
    </table>

    <p>
        ........................................................Our page is still under construction. Please come visit our page often<br/>
    </p>

    <hr>
    <br>

</body>
<script>

    async function userLogin (){


	// get each values from the inputs in the login section [must had an ID]

	const username = document.getElementById("usernameInput").value;
	const pass = document.getElementById("passwordInput").value;

	console.log(username + " " + pass);
	const url = "http://localhost:7000/logmein"

	// fetch all users and create log of the arrays
	const user = (
		"username" : username,
		"passcode" : pass
	)

	const headers = new Headers();
	// headers.set('Authorization',user + ":" + psw);
	const httpresponse = await fetch(url, {
		method: 'POST',
		body: JSON.stringify(user),
		headers: {
			"Content-type": "users/json; charset=UTF-8"
		}
	});
	const body = await httpresponse.json()
	console.log(body);


	if(body.message = null) {
		sessionStorage.setItem("userID", body.userID);
        	sessionStorage.setItem("firstName", body.firstName);
       	 	sessionStorage.setItem("lastName", body.lastName);
        	sessionStorage.setItem("username", body.username);
		sessionStorage.setItem("email", body.email);
		sessionStorage.setItem("phone", body.phone);
        	sessionStorage.setItem("passcode", body.passcode);
		sessionStorage.setItem("permID", body.permID);
		sessionStorage.setItem("generalUser", body.generalUser);
		sessionStorage.setItem("adminPerm", body.adminPerm);
	} 

	if(body.admin != null) {
		window.location = "https://www.google.com"
	} else if (body.general_user != null) {
		window.location = "https://www.wikipedia.org"
	} else {
		alert("Please try again - Log in failure");
		console.log("failure")
	}
}

</script>
</html>
